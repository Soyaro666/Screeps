var roleCollection = require('roleCollection');
var spawnCollection = require('spawnCollection');

module.exports.loop = function () {
	
	for(var name in Game.rooms) {
		var localSpawns = Game.rooms[name].find(FIND_MY_SPAWNS);
		if(localSpawns.length > 0) {
			var spawn = localSpawns[0].name;
			spawnCollection.run(name, spawn);
		}
	}
	
	for(var name in Memory.creeps) {
        if(!Game.creeps[name]) {
			console.log('Creep '+name+' died.');
            delete Memory.creeps[name];
        } else {
		roleCollection.run(Game.creeps[name]);
		}
    }
}